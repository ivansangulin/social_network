datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                   Int          @id @default(autoincrement())
  username             String       @unique @db.VarChar()
  email                String       @unique @db.VarChar()
  password             String       @db.VarChar()
  profile_picture_uuid String?      @db.VarChar()
  locked_profile       Boolean      @db.Boolean()
  uuid                 String       @unique @db.VarChar()
  FriendshipToFriend   Friendship[] @relation("friendRelation")
  FriendshipToUser     Friendship[] @relation("userRelation")

  @@map("users")
}

model Friendship {
  id        Int  @unique @default(autoincrement())
  user_id   Int  @db.Integer()
  user      User @relation(name: "userRelation", fields: [user_id], references: [id])
  friend_id Int  @db.Integer()
  friend    User @relation(name: "friendRelation", fields: [friend_id], references: [id])

  @@id(name: "friendship_id", [user_id, friend_id])
  @@map("friendships")
}
